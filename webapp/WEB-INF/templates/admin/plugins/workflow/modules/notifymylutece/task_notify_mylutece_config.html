<#include "/admin/util/editor/editor.html" />

<#assign sender_name = default_sender_name>
<#assign subject = "">
<#assign message = "">
<#assign position_entry_directory_user_guid = -1>
<#assign id_directory = -1>
<#if config?exists>
	<#assign sender_name = config.senderName>
	<#assign subject = config.subject>
	<#assign message = config.message>
	<#assign position_entry_directory_user_guid = config.positionEntryDirectoryUserGuid>
	<#assign id_directory = config.idDirectory>
</#if>

<h2>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.title}</h2>
<div class="highlight-box">
	<p>
		<label for="id_directory">#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_task_directory} * :</label>
		<@combo name="id_directory" items=list_directories default_value=id_directory />
		<input class="button" type="submit" name="apply" value="#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_apply}"/>
	</p>
	<#if list_entries?exists>
		<p id="entry_user_guid">
			<label for="position_entry_directory_user_guid">#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_task_entry_directory_user_guid} * :</label>
			<@combo name="position_entry_directory_user_guid" items=list_entries default_value=position_entry_directory_user_guid />&nbsp;
			<br/>
			<label>&nbsp;</label>
			#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_task_entry_directory_user_guid_comment}
		</p>
	</#if>
</div>
<div class="highlight-box">
	<p>
		<label for="sender_name">#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_sender_name} * :</label>
		
		<input type="text" name="sender_name" id="" size="80" value="${sender_name}" maxlength="255"/>		
		<br/>
		<label>&nbsp;</label>
		#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_sender_name_comment}
	</p>

  	<p>
    	<label for="suject">#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_subject} * :</label>
		<input type="text" name="subject" id="" size="80" value="${subject}" maxlength="255"/>
		<br/>
		<label>&nbsp;</label>
		#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_subject_comment}
	</p>
	
	<p>
		<label for="message">#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_message} * :</label>
		<div class="editor">
			<textarea name="message" id="" rows="20" cols="90" class="richtext">${message}</textarea>
		</div>
		<br/>
		<label>&nbsp;</label>
		#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_message_comment}
	</p>
	
	<#if config?exists && config.idDirectory!=-1>
		<fieldset>
			<legend>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_directory_comment}</legend>
			<table>
				<tr>
					<th>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_directory}</th>
					<th>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_freemarker}</th>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_status}</td>
					<td>&#36;&#123;status&#125;</td>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_directory_title}</td>
					<td>&#36;&#123;directory_title&#125;</td>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_directory_description}</td>
					<td>&#36;&#123;directory_description&#125;</td>
				</tr>
			</table>
		</fieldset>	
		<br />
		<fieldset>
			<legend>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_user_attribute_comment}</legend>
			<table>
				<tr>
					<th>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_user_attribute}</th>
					<th>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_freemarker}</th>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_first_name}</td>
					<td>&#36;&#123;first_name&#125;</td>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_last_name}</td>
					<td>&#36;&#123;last_name&#125;</td>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_email}</td>
					<td>&#36;&#123;email&#125;</td>
				</tr>
				<tr>
					<td>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_phone_number}</td>
					<td>&#36;&#123;phone_number&#125;</td>
				</tr>
			</table>
		</fieldset>
		<br />
		<fieldset>
			<legend>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_entry_directory_comment}</legend>
			<table>
		  		<tr>
		  			<th>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_entry}</th>
		  			<th>#i18n{module.workflow.notifymylutece.task_notify_mylutece_config.label_freemarker}</th>
		  		</tr>
			 	<#list list_entries_freemarker as entry>
				  	<tr>
				  		<td>
				  			${entry.title}
				  		</td>
				  		<td>
				  			&#36;&#123;position_${entry.position}&#125;
				  		</td>
				  	</tr>
				  </#list>
			</table>
		</fieldset>
		<br />
	</#if>
</div>

<@initEditor />
